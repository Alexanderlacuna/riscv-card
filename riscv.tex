\documentclass{article}

\usepackage[bitstream-charter]{mathdesign}
\usepackage[margin=0.75in]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{titling}
\usepackage{multirow}

\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\instbit}[1]{\mbox{\scriptsize #1}}
\newcommand{\instbitrange}[2]{~\instbit{#1} \hfill \instbit{#2}~}

\begin{document}

%% Title %%
\pretitle{\vspace{-0.75in}\begin{center}\LARGE \textbf }
\title{RISC-V Reference Card}
\posttitle{\par\end{center}}
\author{James Zhu}
\predate{}
\date{}
\postdate{}
\maketitle

\section*{RISC-V Instruction Set}

\subsection*{Core Instruction Formats}
\begin{center}
\begin{tabular}
{p{0in}p{0.4in}p{0.05in}p{0.05in}p{0.05in}p{0.05in}p{0.4in}p{0.6in}p{0.4in}p{0.6in}p{0.7in}l}
&
\multicolumn{1}{l}{\instbit{31}} &
\multicolumn{1}{r}{\instbit{27}} &
\instbit{26} &
\instbit{25} &
\multicolumn{1}{l}{\instbit{24}} &
\multicolumn{1}{r}{\instbit{20}} &
\instbitrange{19}{15} &
\instbitrange{14}{12} &
\instbitrange{11}{7} &
\instbitrange{6}{0} \\
\cline{2-11}

&
\multicolumn{4}{|c|}{funct7} &
\multicolumn{2}{c|}{rs2} &
\multicolumn{1}{c|}{rs1} &
\multicolumn{1}{c|}{funct3} &
\multicolumn{1}{c|}{rd} &
\multicolumn{1}{c|}{opcode} & R-type \\
\cline{2-11}

&
\multicolumn{6}{|c|}{imm[11:0]} &
\multicolumn{1}{c|}{rs1} &
\multicolumn{1}{c|}{funct3} &
\multicolumn{1}{c|}{rd} &
\multicolumn{1}{c|}{opcode} & I-type \\
\cline{2-11}

&
\multicolumn{4}{|c|}{imm[11:5]} &
\multicolumn{2}{c|}{rs2} &
\multicolumn{1}{c|}{rs1} &
\multicolumn{1}{c|}{funct3} &
\multicolumn{1}{c|}{imm[4:0]} &
\multicolumn{1}{c|}{opcode} & S-type \\
\cline{2-11}

&
\multicolumn{4}{|c|}{imm[12$\vert$10:5]} &
\multicolumn{2}{c|}{rs2} &
\multicolumn{1}{c|}{rs1} &
\multicolumn{1}{c|}{funct3} &
\multicolumn{1}{c|}{imm[4:1$\vert$11]} &
\multicolumn{1}{c|}{opcode} & B-type \\
\cline{2-11}

&
\multicolumn{8}{|c|}{imm[31:12]} &
\multicolumn{1}{c|}{rd} &
\multicolumn{1}{c|}{opcode} & U-type \\
\cline{2-11}

&
\multicolumn{8}{|c|}{imm[20$\vert$10:1$\vert$11$\vert$19:12]} &
\multicolumn{1}{c|}{rd} &
\multicolumn{1}{c|}{opcode} & J-type \\
\cline{2-11}
\end{tabular}
\end{center}

\subsection*{Arithmetic Core Instruction Set}

\subsubsection*{RV64I Base Integer Instructions}

\begin{tabular}
{l | l | c | c | c | c | l }
Mnemonic    & Name                  & FMT & Opcode        & F3  & F7    & Description (C syntax)  \\ \hline
\code{add}  & ADD                   & R  & \code{0000011} & 0x0 & 0x00  & \code{R[rd] = R[rs1] + r[rs2]} \\
\code{sub}  & SUB                   & R  & \code{0000011} & 0x0 & 0x20  & \code{R[rd] = R[rs1] - r[rs2]} \\
\code{xor}  & XOR                   & R  & \code{0000011} & 0x4 & 0x00  & \code{R[rd] = R[rs1] \^{} r[rs2]} \\
\code{or}   & OR                    & R  & \code{0000011} & 0x6 & 0x00  & \code{R[rd] = R[rs1] | r[rs2]} \\
\code{and}  & AND                   & R  & \code{0000011} & 0x7 & 0x00  & \code{R[rd] = R[rs1] \& r[rs2]} \\ \hline

\code{addi} & ADD Immediate         & I  & \code{0010011} & 0x0 & 0x00  & \code{R[rd] = R[rs1] + imm} \\
\code{subi} & SUB Immediate         & I  & \code{0010011} & 0x0 & 0x20  & \code{R[rd] = R[rs1] - imm} \\
\code{xori} & XOR Immediate         & I  & \code{0010011} & 0x0 & 0x00  & \code{R[rd] = R[rs1] \^{} imm} \\
\code{ori}  & OR Immediate          & I  & \code{0010011} & 0x0 & 0x00  & \code{R[rd] = R[rs1] | imm} \\
\code{andi} & AND Immediate         & I  & \code{0010011} & 0x0 & 0x00  & \code{R[rd] = R[rs1] \& imm} \\ \hline

\code{sll}  & Shift Left Logical    & R  & \code{0000011} & 0x1 & 0x00  & \code{R[rd] = R[rs1] | r[rs2]} \\
\code{srl}  & Shift Right Logical   & R  & \code{0000011} & 0x2 & 0x00  & \code{R[rd] = R[rs1] | r[rs2]} \\
\code{sra}  & Shift Right Arith     & R  & \code{0000011} & 0x3 & 0x20  & \code{R[rd] = R[rs1] | r[rs2]} \\ \hline

\code{slli} & Shift Left Logical Imm &I  & \code{0010011} & 0x1 & 0x00  &\\
\code{srli} & Shift Right Logical Imm&I  & \code{0010011} & 0x1 & 0x00  &\\
\code{srai} & Shift Right Arith Imm & I  & \code{0010011} & 0x3 & 0x20  &\\ \hline

\code{lb}  & Load Byte              & I  & \code{0000011} & 0x0 &       & \code{R[rd] = *R[rs1][0:7]} \\
\code{lh}  & Load Half              & I  & \code{0000011} & 0x1 &       & \code{R[rd] = *R[rs1][0:15]} \\
\code{lw}  & Load Word              & I  & \code{0000011} & 0x2 &       & \code{R[rd] = *R[rs1][0:31]} \\ \hline

\code{addi} & ADD Immediate         & I  & \code{0010011} & 0x0 & 0x00  & \code{R[rd] = R[rs1] + imm} \\
\code{subi} & SUB Immediate         & I  & \code{0010011} & 0x0 & 0x20  & \code{R[rd] = R[rs1] - imm} \\
\code{xori} & XOR Immediate         & I  & \code{0010011} & 0x0 & 0x00  & \code{R[rd] = R[rs1] \^{} imm} \\
\code{ori}  & OR Immediate          & I  & \code{0010011} & 0x0 & 0x00  & \code{R[rd] = R[rs1] | imm} \\
\code{andi} & AND Immediate         & I  & \code{0010011} & 0x0 & 0x00  & \code{R[rd] = R[rs1] \& imm} \\ \hline
 
\code{beq}  & Branch ==             & B  & \code{1100011} & 0x0 &       & \code{if(R[rs1] == R[rs2]) PC += imm} \\
\code{bne}  & Branch !=             & B  & \code{1100011} & 0x1 &       & \code{if(R[rs1] != R[rs2]) PC += imm} \\
\code{blt}  & Branch <              & B  & \code{1100011} & 0x4 &       & \code{if(R[rs1] < \enspace R[rs2]) PC += imm} \\
\code{bge}  & Branch $\leq$         & B  & \code{1100011} & 0x5 &       & \code{if(R[rs1] >= R[rs2]) PC += imm} \\
\code{bltu} & Branch < (Unsigned)   & B  & \code{1100011} & 0x6 &       & \code{if(R[rs1] < \enspace R[rs2]) PC += imm} \\
\code{bgeu} & Branch $\geq$ (Unsigned) & B  & \code{1100011} & 0x7  &       & \code{if(R[rs1] >= R[rs2]) PC += imm} \\ \hline

\code{jal}  & Jump And Link         & UJ & \code{1101111} &     &       & \code{R[rd] = PC+4; PC += imm} \\ \hline

\code{jalr} & Jump And Link Reg     & I  & \code{1100111} & 0x0 &       & \code{R[rd] = PC+4; PC = R[rs1]} \\ \hline

\end{tabular}

\subsubsection*{RV64M Multiply Extension}
\begin{tabular}
{l | c | c | c | l | l | r}
Mnemonic    & FMT   & Opcode         & Funct3 & Funct7  & Description   & Note \\ \hline
\code{mul}  & R     & \code{0000011} & 0x0    & 0x01 &\code{R[rd] = R[rs1] * r[rs2]} \\
\code{div}  & R     & \code{0000011} & 0x0    & 0x01 &\code{R[rd] = R[rs1] * r[rs2]} \\
\end{tabular}

\subsubsection*{RV64F / D Floating-Point Extensions}

\subsubsection*{RV64A Atomic Extension}

\section*{Pseudo Instructions}

\section*{Opcodes}

\section*{Registers}

\section*{IEEE 754 Floating-Point}

\subsection*{IEEE Half, Single, Double, and Quad-Precision Formats}

\section*{Memory Allocation}

\section*{Size Prefixes}

\end{document}
